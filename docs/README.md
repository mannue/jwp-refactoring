# 레거시 코드 리팩터링
----
## 1단계 - 테스트를 통한 코드 보호 

- 미션 요구 사항 
  - [ ] ```kitchenpos``` 패키지의 코드를 보고 키친포스의 요구 사항을 README.md 에 작성한다.
  - [ ] 정리한 키친포스의 요구 사항을 토대로 테스트 코드를 작성한다.
    - [ ] 모든 Business Object 에 대한 테스트 코드를 작성한다.
      - ```@SpringBootTest``` 를 이용한 통합 테스트 코드 또는 ```@ExtendWith(MockitoExtension.class)``` 를 이용한 단위 테스트 코드를 작성
  
  ----------
- 애그리거트 단위
- 메뉴 그룹(애그리거트 루트)
  - 메뉴 그룹 명
  
- 상품 (애그리러트 루트)
  - 상품 명
  - 가격
  
- 메뉴 (애그리거트 루트)
  - 메뉴 명
  - 카테고리 (메뉴 그룹 ID)
  - 상품 리스트 (메뉴상품 ID)
  - 금액
  
  - 메뉴 상품 (Entity)
  - 메뉴 ID
  - 상품 ID
  - 수량
    
- 주문 (애그리거트 루트)
  - 주문 테이블 ID
  - 주문 상태
  - 주문 시간
  - 주문 항목 
  
  - 주문 항목 (Entity) 
    - 주문 ID
    - 메뉴 ID
    - 수량

- 주문 테이블 (애그리거트 루트)
  - 단제 테이블(단체 지정 ID) 
  - 테이블 상태
  - 사용 인원 수
  
- 단체 지정 (애그리거트 루트)
  - 생성 날짜
  - 주문 테이블 리스트 (주문 테이블 ID)
  
- 요구 사항
  - 주문 테이블
    - 주문 테이블을 생성 할수 있다.
    - 주문 테이블은 빈 테이블 인지 확인 할수 있다.
    - 주문 테이블을 빈 테이블로 변경 할수 있다.
    - 빈 테이블로 변경시 등록된 테이블이여 하고 결재 완료 상태 에서만 변경 할수 있다.
    - 단체 테이블에 속해 있다면 빈 테이블로 변경 할수 없다.
    - 등록된 주문 테이블들을 정보를 알수 있다.
    - 주문 테이블에는 방문한 손님들이 앉을수 있고 앉을 경우 해당 손님의 수로 변경 할수 있다.

  - 단체 지정
    - 주문 테이블들이 2개 이상인 경우에만 단체 지정을 할수 있다.
    - 등록된 주문 테이블들만 단체 지정을 할수 있다.
    - 단체 지정을 요청한 테이블들은 기존에 단체 지정이 없어야 한다.
    - 정상 등록시 요청한 주문 테이블들의 그룹 정보도 업데이트 되어야 한다.
    - 단체 지정 해제 시 단체 지정된 주문 테이블들의 그룹 정보가 삭제 되어야 한다.
    - 단체 지정 해제 시 단체 지정된 주문 테이블들은 결제 완료된 상태여야 한다.
  
  - 상품
    - 상품은 이름 정보를 가지며, 이름은 중복 허용하지 않는다.
    - 상품은 가격 정보를 가지며, 가격은 음수가 될수 없다.
  
  - 메뉴 그룹
    - 메뉴 그룹은 그룹 이름을 가지며, 중복을 허용하지 않는다.
  
  - 메뉴
    - 메뉴는 가격 정보를 가지며, 가격 정보는 음수가 될수 없다.
    - 메뉴는 메뉴 그룹에 지정되어 있어야 한다.
    - 메뉴는 1개의 이상 메뉴 상품을 가진다.
    - 메뉴 가격과 메뉴에 등록된 메뉴 상품의 총 가격이 일치해야 한다.
    - 메뉴 정상 등록시 메뉴 상품에도 등록된 메뉴 정보가 기입되어야 한다.
    - 메뉴와 메뉴 상품 정보들을 알수 있다.
  
  - 주문 
    - 주문시 최소 1개 이상의 주문 항목을 요청해야 한다.
    - 주문시 주문 항목에는 메뉴가 있어야 한다.
    - 주문은 등록된 주문 테이블에서만 할수 있다.
    - 빈 테이블인 경우 주문 처리가 되지 않는다.
    - 주문 정상 처리시 주문 상태는 COOKING 상태 이다.
    - 주문 정상 처리시 주문 항목에 주문 정보를 업데이트 해야 한다.
    - 주문과 주문 항목 정보들을 알수 있다.